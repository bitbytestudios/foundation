include_rules

preload src
preload src/foundation
preload src/foundation/algorithms
preload src/foundation/allocators
preload src/foundation/compat
preload src/foundation/containers
preload src/foundation/containers/thread_safe
preload src/foundation/debug
preload src/foundation/detect
preload src/foundation/digest
preload src/foundation/network
preload src/foundation/system
preload src/foundation/system/concurrency
preload src/foundation/system/network
preload src/foundation/thread_safe

OBJS = src/*.o
OBJS += src/foundation/*.o
OBJS += src/foundation/algorithms/*.o
OBJS += src/foundation/allocators/*.o
OBJS += src/foundation/compat/*.o
OBJS += src/foundation/containers/*.o
OBJS += src/foundation/containers/thread_safe/*.o
OBJS += src/foundation/debug/*.o
OBJS += src/foundation/detect/*.o
OBJS += src/foundation/digest/*.o
OBJS += src/foundation/network/*.o
OBJS += src/foundation/system/*.o
OBJS += src/foundation/system/concurrency/*.o
OBJS += src/foundation/system/network/*.o
OBJS += src/foundation/thread_safe/*.o

ifeq (@(FOUNDATION_BUILD),debug)
SUFFIX = -dbg
endif

SUFFIX = $(SUFFIX)-@(TUP_ARCH)

include deps.tup
LIBS = $(FOUNDATION_LIBS)
: $(OBJS) $(FOUNDATION_DEPENDENCIES) |> !ar |> foundation$(SUFFIX)$(LIB_EXT)
